"use strict";(window.webpackChunkpixfort_core=window.webpackChunkpixfort_core||[]).push([[2170],{72170:function(t,e,r){r.r(e);var a=r(64467),i=r(96540),s=r(61225),l=r(84375),n=r(8766),o=r(80094),d=r(86528),h=r(54018),p=r(54771),u=r(74848);class c extends i.Component{constructor(t){super(t),(0,a.A)(this,"transformValue",((t,e)=>{if(!t)return{light:null,dark:null};if("string"==typeof t||t instanceof String)try{let e=JSON.parse(t);if(isNaN(e))return e}catch(t){}if("object"==typeof t&&void 0!==t.light&&void 0!==t.dark)return t;const r="number"==typeof t?t:"string"!=typeof t||isNaN(t)||isNaN(parseFloat(t))?null:parseFloat(t);if(null!==r&&e&&""!==e.trim()){return{light:{url:e,id:r,height:null,width:null,thumbnail:null,title:null,caption:null,alt:null,description:null},dark:null}}if("string"==typeof t){return{light:{url:t,id:null,height:null,width:null,thumbnail:null,title:null,caption:null,alt:null,description:null},dark:null}}return{light:null,dark:null}})),(0,a.A)(this,"getCurrentImageData",(()=>this.state.value?this.state.value[this.state.activeMode]:null)),(0,a.A)(this,"getCurrentImageUrl",(()=>{const t=this.getCurrentImageData();return t?t.url:""})),(0,a.A)(this,"handleInputChange",(t=>{let e=t.target.value,r={...this.state.value};r[this.state.activeMode]||(r[this.state.activeMode]={url:null,id:null,height:null,width:null,thumbnail:null,title:null,caption:null,alt:null,description:null}),r[this.state.activeMode].url=e,this.setState({value:r}),this.props.onChange({value:r,id:this.props.id})})),(0,a.A)(this,"removeImage",(()=>{let t={...this.state.value};t[this.state.activeMode]=null,this.setState({value:t,preview:""}),this.props.onChange({value:t,id:this.props.id})})),(0,a.A)(this,"openMediaModal",(t=>{t.preventDefault(),t.stopPropagation();let e=this;var r=wp.media.frames.file_frame=wp.media({title:(0,p.__)("Select or upload image","pixfort-core-admin"),library:{type:["image"]},button:{text:(0,p.__)("Select","pixfort-core-admin")},multiple:!1});return r.on("select",(function(){var t=r.state().get("selection").first().toJSON();console.log({attachment:t});let a={...e.state.value};const i={url:t.url,id:t.id,height:t.height,width:t.width,thumbnail:t.sizes?.thumbnail?.url||t.url,title:t.title,caption:t.caption,alt:t.alt,description:t.description};a[e.state.activeMode]=i,e.setState({value:a,preview:t.url}),e.props.onChange({value:a,id:e.props.id}),r.close()})),r.open(),!1})),(0,a.A)(this,"handleModeSwitch",(t=>{this.setState({activeMode:t})}));let e="",r="text";this.props.preview&&(e=this.props.preview),this.props.local&&(r="hidden");let i=this.transformValue(this.props.value,e);this.state={value:i,preview:e,inputType:r,activeMode:"light"}}render(){const t=this.getCurrentImageData(),e=this.getCurrentImageUrl(),r=t&&e;return(0,u.jsxs)("div",{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center mx-6 ${this.props.classes} ${!0===this.props.hideBorderBottom?"":"border-b border-gray-100"} ${!0===this.props.showBorderTop?"border-t border-gray-100":""} dark:border-gray-700 `,children:[(0,u.jsxs)("div",{className:"pr-2 pb-2 text-sm shrink",children:[(0,u.jsxs)("label",{className:"mb-0 flex items-center cursor-auto",children:[(0,u.jsx)("span",{className:"font-medium tracking-[-0.01em] text-gray-900 dark:text-white",children:this.props.label}),this.props.tooltipImage||this.props.tooltipText?(0,u.jsx)(o.A,{tooltipText:this.props.tooltipText,tooltipImage:this.props.tooltipImage,type:"default"}):null]}),(0,u.jsx)("div",{className:"mt-1 mb-2 text-gray-500",children:this.props.description})]}),(0,u.jsxs)("div",{className:"w-60 flex-col items-end justify-end shrink-0",children:[this.props.dynamic&&this.props.dynamicColors&&(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("div",{className:"flex items-center bg-gray-50 dark:bg-gray-700/50 rounded-lg p-[3px]",children:[(0,u.jsxs)("button",{type:"button",onClick:()=>this.handleModeSwitch("light"),className:"flex items-center justify-center gap-1.5 w-full px-3 py-[5px] rounded-md text-xs font-medium transition-all duration-150 border "+("light"===this.state.activeMode?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm border-gray-200 dark:border-gray-600":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[(0,u.jsx)(l.A,{className:"w-4 h-4"}),"Light"]}),(0,u.jsxs)("button",{type:"button",onClick:()=>this.handleModeSwitch("dark"),className:"flex items-center justify-center gap-1.5 w-full px-3 py-[5px] rounded-md text-xs font-medium transition-all duration-150 border "+("dark"===this.state.activeMode?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm border-gray-200 dark:border-gray-600":"border-transparent text-gray-400 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[(0,u.jsx)(n.A,{className:"w-4 h-4"}),"Dark"]})]})}),r&&(0,u.jsx)("div",{className:"mb-2 flex justify-start sm:justify-center bg-gray-50 border border-gray-200 dark:bg-gray-700/50 dark:border-gray-700 shadow-sm rounded-md overflow-hidden p-2",children:(0,u.jsx)("img",{className:"max-h-24 inline-block self-end",src:e,alt:t.alt||"",title:t.title||""})}),(0,u.jsx)("input",{className:"mb-2 relative w-full cursor-text rounded-md bg-white dark:bg-gray-700 dark:text-gray-400 py-2 pl-3 text-left shadow-sm focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-opacity-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent text-sm border border-gray-200 dark:border-0",name:`field-${this.props.id}`,type:this.state.inputType,onChange:this.handleInputChange,value:e,placeholder:"Insert image URL"}),(0,u.jsxs)("div",{className:"flex justify-end",children:[(0,u.jsxs)("button",{onClick:this.openMediaModal,className:"inline-flex w-full items-center text-xs font-semibold bg-primary/10 text-primary hover:bg-primary/20 dark:bg-primary/20 dark:hover:bg-primary/30 justify-center rounded-md border border-transparent px-3 py-2 transition-all ease-in-out",children:[(0,u.jsx)(d.A,{className:"shrink-0 inline-block mr-1",width:"20px",height:"20px"}),r?(0,p.__)("Change Image","pixfort-core-admin"):(0,p.__)("Select Image","pixfort-core-admin")]}),r&&(0,u.jsx)("button",{onClick:this.removeImage,className:"ml-2 inline-flex items-center shrink-0 text-xs font-semibold shadow-sm bg-white border border-gray-200 dark:bg-gray-700/80 text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-600 hover:bg-gray-100/60 dark:hover:bg-gray-700/50 justify-center rounded-md px-3 py-2 transition-all ease-in-out",children:(0,u.jsx)(h.A,{className:"shrink-0 inline-block",width:"20px",height:"20px"})})]})]})]})}}(0,a.A)(c,"defaultProps",{label:"Image",classes:"py-6",value:"",local:!1,dynamic:!1,onChange:()=>{}});e.default=(0,s.Ng)((t=>({dynamicColors:t.data.dynamicColors})),null)(c)}}]);