"use strict";(window.webpackChunkpixfort_core=window.webpackChunkpixfort_core||[]).push([[2491],{32491:function(e,t,a){a.d(t,{A:function(){return k}});var s=a(64467),r=a(96540),l=a(18059),i=a(77832),n=a(44670),o=a(71083);var d,u={searchSubIDList(e){return o.A.get(pixfort_options_obj.ADMIN_LINK,e)}},c=a(73543);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},h.apply(null,arguments)}var p=function(e){return r.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),d||(d=r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("circle",{cx:12,cy:12,r:10,fill:"currentcolor",fillOpacity:.15}),r.createElement("path",{fill:"currentcolor",d:"M16,11 C16.5522847,11 17,11.4477153 17,12 C17,12.5522847 16.5522847,13 16,13 L8,13 C7.44771525,13 7,12.5522847 7,12 C7,11.4477153 7.44771525,11 8,11 L16,11 Z"}))))},m=a(5039),g=a(74848);const x=()=>{const e=[{id:0,name:"All Site",value:"all"},{id:1,name:"Archives",value:"archives",nested:[{id:0,name:"All Archives",value:"all",hasSubID:!1},{id:1,name:"Author Archive",value:"author",hasSubID:!0},{id:1,name:"Date Archive",value:"date",hasSubID:!1},{id:1,name:"Search Results",value:"search",hasSubID:!1}]},{id:2,name:"Singular",value:"singular",nested:[{id:0,name:"All Singular",value:"all",hasSubID:!1},{id:1,name:"Front Page",value:"frontpage",hasSubID:!1},{id:2,name:"Posts",value:"post",hasSubID:!0},{id:3,name:"In Category",value:"cat",hasSubID:!0},{id:4,name:"Pages",value:"page",hasSubID:!0},{id:5,name:"Portfolio",value:"portfolio",hasSubID:!0},{id:6,name:"Direct Child of",value:"child_of",hasSubID:!0}]},{id:3,name:"WooCommerce",value:"woocommerce",nested:[{id:0,name:"Entire Shop",value:"all",hasSubID:!1},{id:1,name:"All Product Archives",value:"product_archives",hasSubID:!1},{id:2,name:"Shop Page",value:"shop",hasSubID:!1},{id:3,name:"Search Results",value:"search",hasSubID:!1},{id:4,name:"Product Categories",value:"product_cat",hasSubID:!0},{id:5,name:"Product Tags",value:"product_tag",hasSubID:!0},{id:6,name:"Products",value:"product",hasSubID:!0},{id:7,name:"Category",value:"woocat",hasSubID:!0}]}];let t=[];return"undefined"!=typeof pixfort_options_data&&pixfort_options_data.customPostTypes&&(t=pixfort_options_data.customPostTypes.map(((t,a)=>{let s=[{id:0,name:`All ${t.name}`,value:"all",hasSubID:!1},{id:1,name:t.name,value:t.slug,hasSubID:!0},{id:2,name:`${t.name} By Author`,value:`${t.slug}_by_author`,hasSubID:!0}];return t.taxonomies&&t.taxonomies.length>0&&t.taxonomies.forEach(((e,t)=>{s.push({id:s.length,name:`In ${e.name}`,value:e.slug,hasSubID:!0})})),{id:e.length+a,name:t.name,value:`custom_${t.slug}`,nested:s}}))),{include:{options:[{id:0,name:"Include",value:"include"},{id:1,name:"Exclude",value:"exclude"}]},general:{options:[...e,...t]}}};x();class v extends r.Component{constructor(e){super(e),(0,s.A)(this,"handleInputChange",(e=>{let t=e.target.value;this.setState({value:t}),this.props.onChange({value:t,id:this.props.id})})),(0,s.A)(this,"getSelectName",((e,t)=>{let a="Choose option";return this.options[e].options.map((e=>{t===e.value&&(a=e.name)})),a})),(0,s.A)(this,"getNestedSelectName",((e,t)=>{let a="Choose option",s=this.getNestedSelectValue(e,t);return this.options[e].options.map((e=>{t===e.value&&e.nested.map((e=>{s===e.value&&(a=e.name)}))})),a})),(0,s.A)(this,"getSubIDSelectName",(()=>{let e="All";return this.state.subIDName&&(e=this.state.subIDName),e})),(0,s.A)(this,"getSelectValue",(e=>this.state[e]?this.state[e]:"")),(0,s.A)(this,"getNestedSelectValue",((e,t)=>this.state.nestedValue?this.state.nestedValue:"")),(0,s.A)(this,"getSubIDSelectValue",((e,t)=>this.state.subIDValue?this.state.subIDValue:"all")),(0,s.A)(this,"setSelectedValue",((e,t)=>{let a={};a[e]=t,this.state.nestedValue||this.options[e].options.map((e=>{t===e.value&&e.hasOwnProperty("nested")&&(a.nestedValue=e.nested[0].value)})),this.setState(a,this.valueChange)})),(0,s.A)(this,"setNestedSelectedValue",(e=>{this.setState({nestedValue:e,subIDValue:"all",subIDName:"All",subIDList:[]},this.valueChange)})),(0,s.A)(this,"setSubIDSelectedValue",(e=>{let t=e;this.state.subIDList.map((a=>{e===a.value&&(t=a.name)})),this.setState({subIDValue:e,subIDName:t},this.valueChange)})),(0,s.A)(this,"searchChange",(e=>{let t=e.target.value;t&&""!==t&&(this.setState({searching:!0}),u.searchSubIDList({params:{action:"pix_conditions_search",data:{value:t,general:this.state.general,nestedValue:this.state.nestedValue}}}).then((e=>{try{let t=e.data;t.list&&this.setState({subIDList:t.list,searching:!1})}catch(e){return this.setState({searching:!1}),!1}})))})),(0,s.A)(this,"selectIcon",(e=>{if("include"===e)return"include"===this.state.include?(0,g.jsx)(c.A,{width:"20",height:"20",className:"shrink-0 inline-block -ml-1 mr-1.5 rtl:ml-1 rtl:mr-1.5 group-hover/button:rotate-90 transition-all ease-in-out duration-200 text-teal-400"}):(0,g.jsx)(p,{width:"20",height:"20",className:"shrink-0 inline-block -ml-1 mr-1.5 rtl:ml-1 rtl:mr-1.5 group-hover/button:rotate-180 transition-all ease-in-out duration-200 text-red-400"})}));let t={};this.props.value&&(t=this.props.value),t.subIDList=[],t.searching=!1,this.state=t,this.options=x()}componentDidMount(){this.options=x(),this.forceUpdate()}valueChange(){let e=structuredClone(this.state),t=e.general;if(t&&this.state.nestedValue){let a=!1;this.options.general.options.map((e=>{t===e.value&&e.hasOwnProperty("nested")&&e.nested.map((e=>{e.value===this.state.nestedValue&&(a=!0)}))})),a||delete e.nestedValue}e.subIDList&&delete e.subIDList,e.searching&&delete e.searching,this.props.onChange(e)}render(){return(0,g.jsx)("div",{className:"flex rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-400 shadow-sm mb-2 w-full border border-gray-200 dark:border-gray-700",children:Object.keys(this.options).map((e=>{let t=this.options[e],a="";return a="general"===e?"border-l-gray-200 border-l-[1px] dark:border-gray-700":"rounded-tl-[4px] rounded-bl-[4px] bg-gray-100/60 dark:bg-gray-700 font-semibold dark:text-white",(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(l.WF,{className:"relative grow",value:this.getSelectValue(e),onChange:t=>this.setSelectedValue(e,t),children:(0,g.jsxs)("div",{className:"relative grow",children:[(0,g.jsxs)(l.WF.Button,{className:`group/button flex items-center w-full cursor-pointer ${a}  py-2 pl-3 pr-10 text-left  focus:outline-none focus-visible:border-0 focus-visible:ring-0 focus-visible:ring-opacity-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent text-sm`,children:[this.selectIcon(e),(0,g.jsx)("span",{className:"block truncate",children:this.getSelectName(e,this.getSelectValue(e))}),(0,g.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,g.jsx)(n.A,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,g.jsx)(i.e,{as:r.Fragment,leave:"transition ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,g.jsx)(l.WF.Options,{className:"absolute mt-1 mb-3 max-h-60 w-full md:min-w-[180px] overflow-auto rounded-md bg-white dark:bg-gray-700 p-1 shadow-xl ring-1 ring-transparent ring-opacity-0 z-10 focus:outline-none text-sm",children:t.options.map(((e,t)=>(0,g.jsx)(l.WF.Option,{className:({active:e})=>"relative mb-0 rounded cursor-pointer select-none py-2 pl-9 pr-4 rtl:pl-4 rtl:pr-9 "+(e?"bg-gray-100/60 text-gray-900 dark:bg-gray-800/50 dark:text-white":"text-gray-500 dark:text-gray-400"),value:e.value,children:({selected:t})=>(0,g.jsx)("span",{className:"block truncate font-normal",children:t?(0,g.jsxs)("span",{children:[(0,g.jsx)("span",{className:"font-semibold",children:e.name}),(0,g.jsx)("span",{className:"absolute inset-y-0 left-0 rtl:right-0 rtl:left-auto items-center pl-2 rtl:pl-0 rtl:pr-2 text-teal-400 hidden ui-selected:flex",children:(0,g.jsx)(m.A,{width:"22px",height:"22px","aria-hidden":"true"})})]}):e.name})},t)))})})]})}),t.options.map(((t,a)=>{if(t.hasOwnProperty("nested")&&t.value===this.getSelectValue(e))return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(l.WF,{className:"relative grow",value:this.getNestedSelectValue(),onChange:e=>this.setNestedSelectedValue(e),children:(0,g.jsxs)("div",{className:"relative grow",children:[(0,g.jsxs)(l.WF.Button,{className:"relative w-full cursor-pointer border-l-gray-200 border-l-[1px] dark:border-l-gray-700 py-2 pl-3 pr-10 text-left  focus:outline-none text-sm",children:[(0,g.jsx)("span",{className:"block truncate",children:this.getNestedSelectName(e,t.value)}),(0,g.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,g.jsx)(n.A,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,g.jsx)(i.e,{as:r.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,g.jsx)(l.WF.Options,{className:"absolute mt-1 mb-3 max-h-60 w-full md:min-w-[180px] overflow-auto rounded-md bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-400 p-1 shadow-xl ring-1 ring-black ring-opacity-5 z-10 focus:outline-none text-sm",children:t.nested.map(((e,t)=>(0,g.jsx)(l.WF.Option,{className:({active:e})=>"relative mb-0 rounded cursor-pointer select-none py-2 pl-9 pr-4 "+(e?"bg-gray-100/60 text-gray-900 dark:bg-gray-800/50 dark:text-white":"text-gray-500 dark:text-gray-400"),value:e.value,children:({selected:t})=>(0,g.jsx)("span",{className:"block truncate font-normal",children:t?(0,g.jsxs)("span",{children:[(0,g.jsx)("span",{className:"font-semibold",children:e.name}),(0,g.jsx)("span",{className:"absolute inset-y-0 left-0 items-center pl-2 text-teal-400 hidden ui-selected:flex",children:(0,g.jsx)(m.A,{width:"22px",height:"22px","aria-hidden":"true"})})]}):e.name})},t)))})})]})}),t.nested.map(((e,t)=>{if(e.hasOwnProperty("hasSubID")&&e.hasSubID&&e.value===this.getNestedSelectValue())return(0,g.jsx)(l.WF,{className:"relative grow md:min-w-[150px]",value:this.getSubIDSelectValue(),onChange:e=>this.setSubIDSelectedValue(e),children:(0,g.jsxs)("div",{className:"relative grow",children:[(0,g.jsxs)(l.WF.Button,{className:"relative w-full cursor-pointer border-l-gray-200 border-l-[1px] dark:border-l-gray-700 py-2 pl-3 pr-10 text-left  focus:outline-none text-sm",children:[(0,g.jsx)("span",{className:"block truncate",children:this.getSubIDSelectName()}),(0,g.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,g.jsx)(n.A,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,g.jsx)(i.e,{as:r.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,g.jsxs)(l.WF.Options,{className:"absolute mt-1 mb-3 max-h-60 w-full md:min-w-[200px] right-0 overflow-auto rounded-md bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-400 p-1 shadow-xl ring-1 ring-black ring-opacity-5 z-10 focus:outline-none text-sm",children:[(0,g.jsx)("div",{className:"relative mb-1",children:(0,g.jsx)("input",{type:"text",onChange:this.searchChange,className:"w-full rounded bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-400 border-1 border-gray-200 dark:border-gray-600 shadow-none py-1 outline-none",placeholder:"Search for results"})}),this.state.searching&&(0,g.jsxs)("div",{className:"bg-primary/10 rounded py-1 text-primary text-center text-xs mb-1 flex font-bold justify-center items-center",children:[(0,g.jsxs)("svg",{className:"inline-flex animate-spin mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,g.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,g.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,g.jsx)("span",{children:"Searching..."})]}),(0,g.jsx)(l.WF.Option,{className:({active:e})=>`relative mb-0 rounded cursor-pointer select-none py-2 pl-9 pr-4 overflow-hidden  ${e?"bg-gray-100/60 text-gray-900 dark:bg-gray-800/50 dark:text-white":"text-gray-500 dark:text-gray-400"} transition-all ease-in-out duration-20`,value:"all",children:({selected:e})=>(0,g.jsx)("span",{className:"block truncate font-normal",children:e?(0,g.jsxs)("span",{children:[(0,g.jsx)("span",{className:"font-semibold",children:"All"}),(0,g.jsx)("span",{className:"absolute inset-y-0 left-0 items-center pl-2 text-teal-400 hidden ui-selected:flex",children:(0,g.jsx)(m.A,{width:"22px",height:"22px","aria-hidden":"true"})})]}):"All"})}),this.state.subIDList.map(((e,t)=>(0,g.jsx)(l.WF.Option,{className:({active:e})=>`relative mb-0 rounded cursor-pointer select-none py-2 pl-9 pr-4 overflow-hidden ${e?"bg-gray-100/60 text-gray-900 dark:bg-gray-800/50 dark:text-white":"text-gray-500 dark:text-gray-400"} transition-all ease-in-out duration-20`,value:e.value,children:({selected:t})=>(0,g.jsx)("span",{className:"block truncate font-normal text-sm",children:t?(0,g.jsxs)("span",{children:[(0,g.jsxs)("span",{className:"font-semibold",children:[" ",e.name]}),(0,g.jsx)("span",{className:"absolute inset-y-0 left-0 items-center pl-2 text-teal-400 hidden ui-selected:flex",children:(0,g.jsx)(m.A,{width:"22px",height:"22px","aria-hidden":"true"})})]}):e.name})},t)))]})})]})},t)}))]},e)}))]},e)}))})}}(0,s.A)(v,"defaultProps",{label:"Text Input",value:"",onChange:()=>{}});var b,y=v,f=a(54018);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},j.apply(null,arguments)}var w=function(e){return r.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),b||(b=r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"currentcolor",fillOpacity:.25,d:"M14.7071068,13.2928932 L20,18.585 L20,17 C20,16.4871642 20.3860402,16.0644928 20.8833789,16.0067277 L21,16 C21.5522847,16 22,16.4477153 22,17 L22,21 C22,21.5522847 21.5522847,22 21,22 L17,22 C16.4477153,22 16,21.5522847 16,21 C16,20.4477153 16.4477153,20 17,20 L18.585,20 L13.2928932,14.7071068 C12.9023689,14.3165825 12.9023689,13.6834175 13.2928932,13.2928932 C13.6834175,12.9023689 14.3165825,12.9023689 14.7071068,13.2928932 Z"}),r.createElement("path",{fill:"currentcolor",d:"M21,2 C21.5522847,2 22,2.44771525 22,3 L22,7 C22,7.55228475 21.5522847,8 21,8 C20.4477153,8 20,7.55228475 20,7 L20,5.414 L12.7071068,12.7071068 C12.5195704,12.8946432 12.2652165,13 12,13 L3,13 C2.44771525,13 2,12.5522847 2,12 C2,11.4477153 2.44771525,11 3,11 L11.584,11 L18.585,3.999 L17,4 C16.4871642,4 16.0644928,3.61395981 16.0067277,3.11662113 L16,3 C16,2.44771525 16.4477153,2 17,2 L21,2 Z"}))))},N=a(80094),S=a(54771);class C extends r.Component{constructor(e){super(e),(0,s.A)(this,"handleInputChange",(e=>{let t=e.target.value;this.setState({value:t}),this.props.onChange({value:t,id:this.props.id})})),(0,s.A)(this,"valueChange",(()=>{this.props.onChange({value:this.state.value,id:this.props.id})})),(0,s.A)(this,"conditionChange",(e=>{let t=structuredClone(this.state.conditions);t.map(((a,s)=>{e.id===a.id&&(t[s]=e)})),this.setState({conditions:t,value:JSON.stringify(t)},this.valueChange)})),(0,s.A)(this,"addCondition",(e=>{e.preventDefault();let t=this.state.conditions;t.push({id:Math.floor(1e6*Math.random()),include:"include",general:"all"}),this.setState({conditions:t,value:JSON.stringify(t)},this.valueChange)})),(0,s.A)(this,"deleteCondition",(e=>{let t=structuredClone(this.state.conditions),a=[];return t.map(((t,s)=>{e!==t.id&&a.push(Object.assign({},t))})),this.setState({conditions:a,value:JSON.stringify(a)},this.valueChange),!1}));let t="",a=[];this.props.value&&(t=this.props.value,a=JSON.parse(this.props.value)),this.state={value:this.props.value,conditions:a}}render(){return(0,g.jsxs)("div",{className:`mx-6 py-6 ${!0===this.props.hideBorderBottom?"":"border-b border-gray-100"} dark:border-gray-700 `,children:[(0,g.jsxs)("div",{className:"pr-2 pb-2 text-sm",children:[(0,g.jsxs)("label",{className:"mb-0 flex items-center cursor-auto",children:[(0,g.jsx)("span",{className:"font-medium tracking-[-0.01em] text-gray-900 dark:text-white",children:this.props.label}),this.props.tooltipImage||this.props.tooltipText?(0,g.jsx)(N.A,{tooltipText:this.props.tooltipText,tooltipImage:this.props.tooltipImage,type:"default"}):null]}),(0,g.jsx)("div",{className:"mt-1 mb-2 font-normal text-gray-500 max-w-full",children:this.props.description})]}),(0,g.jsxs)("div",{className:"",children:[Object.keys(this.state.conditions).map((e=>{let t=this.state.conditions[e];return(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(y,{id:t.id,value:t,onChange:this.conditionChange}),(0,g.jsx)("button",{type:"button",className:"outline-0 focus:outline-0 p-1.5 mt-1 mb-2",onClick:()=>this.deleteCondition(t.id),children:(0,g.jsx)(f.A,{className:"shrink-0 inline-block text-gray-300 dark:text-gray-600 hover:text-red-400 dark:hover:opacity-80 transition-all ease-in-out duration-100"})})]},t.id)})),(0,g.jsxs)("a",{onClick:this.addCondition,className:"group/button w-full text-sm font-bold bg-primary/10 dark:bg-primary/20 text-primary hover:bg-primary/20 dark:hover:bg-primary/30 inline-flex justify-center items-center rounded-md border cursor-pointer border-transparent px-3 py-2 transition-all ease-in-out duration-75",children:[(0,S.__)("Add Condition","pixfort-core-admin"),(0,g.jsx)(w,{width:"20px",height:"20px",className:"shrink-0 inline-block ml-1 group-hover/button:ml-2 transition-all ease-in-out duration-200"})]})]})]})}}(0,s.A)(C,"defaultProps",{label:"Display Conditions",value:"",onChange:()=>{}});var k=C}}]);