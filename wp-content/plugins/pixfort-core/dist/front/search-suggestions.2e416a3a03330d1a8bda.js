"use strict";(self.webpackChunkpixfort_core=self.webpackChunkpixfort_core||[]).push([[283],{175:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var o=n(244);function i(e){e.addClass("ajax-loaded");let t=e.closest(".pix-ajax-search-container"),n=e.closest(".pix-search-form"),i=e.data("search-link"),a="",s=!0,r=-1,l=[];const c={name:"customPosition",enabled:!0,phase:"write",fn({state:e}){Object.assign(e.elements.popper.style,{transform:"none"})}},d=(0,o.Ay)(e[0],{content:"",allowHTML:!0,interactive:!0,trigger:"manual",placement:"bottom",maxWidth:"none",appendTo:t[0],popperOptions:{modifiers:[c,{name:"flip",options:{enabled:!1}},{name:"preventOverflow",options:{padding:{top:0,bottom:0,left:0,right:0}}},{name:"offset",options:{offset:[0,0]}}]}});function p(){$(".dropdown-item").removeClass("active"),r>=0&&r<l.length&&$(`.dropdown-item[data-index=${r}]`).addClass("active")}e.on("input",(function(){const t=e.val();a!==t&&(a=t,t.length>1?$.get(i,{term:t},(function(e){if(e.error)d.hide();else{!function(e){l=e,r=-1;const t=e.map(((e,t)=>{const n=e.icon?`<img src="${e.icon}" alt=""> `:"";return`<div class="dropdown-item" data-id="${e.value}" data-index="${t}">${n}${e.text}</div>`})).join("");d.setContent(t),d.show()}(JSON.parse(e))}})):d.hide())})),$(document).on("click",".dropdown-item",(function(e){e.preventDefault(),s=!1;const t=$(this).data("id");t&&(window.location.href=t)})),t.on("submit",(function(e){s||e.preventDefault()})),n.on("submit",(function(e){s||e.preventDefault()})),e.on("blur",(function(){setTimeout((()=>{d.hide()}),200)})),e.on("keydown",(function(e){if("Enter"===e.key){if(r>=0&&r<l.length){e.preventDefault(),s=!1;const t=l[r].value;t&&(window.location.href=t)}}else"ArrowDown"===e.key?(e.preventDefault(),r=(r+1)%l.length,p()):"ArrowUp"===e.key&&(e.preventDefault(),r=(r-1+l.length)%l.length,p())}))}}}]);